<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Manager - Drip Campaign Quiz</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 800px;
            width: 100%;
            min-height: 600px;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 20px 20px 0 0;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 14px;
        }

        .progress-bar {
            background: rgba(255,255,255,0.2);
            height: 8px;
            border-radius: 4px;
            margin-top: 20px;
            overflow: hidden;
        }

        .progress-fill {
            background: white;
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .content {
            padding: 40px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .category-label {
            color: #667eea;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .question-text {
            font-size: 20px;
            color: #333;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }

        .option {
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: white;
            position: relative;
            padding-left: 50px;
        }

        .option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .option.selected {
            border-color: #667eea;
            background: #f0f4ff;
            color: #333;
        }

        .option::before {
            content: '☐';
            position: absolute;
            left: 20px;
            font-size: 20px;
            color: #999;
        }

        .option.selected::before {
            content: '☑';
            color: #667eea;
        }

        .option.custom-option {
            padding-left: 20px;
        }

        .option.custom-option::before {
            content: '';
        }

        .option.custom-option.selected {
            background: #667eea;
            color: white;
        }

        .selection-counter {
            background: #667eea;
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 20px;
            display: inline-block;
        }

        .custom-input-container {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 10px;
            border: 2px solid #667eea;
        }

        .custom-input-container label {
            display: block;
            margin-bottom: 10px;
            color: #667eea;
            font-weight: 600;
        }

        .custom-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.2s ease;
        }

        .custom-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
            padding-top: 20px;
        }

        .nav-button {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .prev-button {
            background: #f0f0f0;
            color: #666;
        }

        .prev-button:hover:not(:disabled) {
            background: #e0e0e0;
        }

        .prev-button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .next-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .next-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .next-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .download-button {
            background: linear-gradient(135deg, #00c853 0%, #00e676 100%);
            color: white;
        }

        .download-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 200, 83, 0.4);
        }

        .question-counter {
            color: #999;
            font-size: 14px;
        }

        .welcome-screen, .completion-screen {
            text-align: center;
            padding: 40px;
        }

        .welcome-screen h2, .completion-screen h2 {
            font-size: 32px;
            color: #333;
            margin-bottom: 20px;
        }

        .welcome-screen p, .completion-screen p {
            font-size: 18px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .start-button {
            padding: 15px 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            padding: 20px;
            background: #f8f9ff;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .stat-label {
            font-size: 14px;
            color: #999;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Sales Manager Quiz</h1>
            <p>Drip Campaign Development - Sales Focus</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>
        
        <div class="content" id="content">
            <!-- Content will be dynamically inserted here -->
        </div>
    </div>

    <script>
        const quizData = [
            // Manual Outreach - Sales specific
            {
                category: "Manual Outreach Integration",
                question: "How many manual phone call attempts do sales reps currently make per lead?",
                options: ["1-2 calls", "3-5 calls", "6-8 calls", "9-12 calls", "More than 12 calls", "Varies by lead score"]
            },
            {
                category: "Manual Outreach Integration",
                question: "At what intervals are phone calls made?",
                options: ["Daily for first week", "Every 2-3 days", "Weekly", "Bi-weekly", "Monthly", "No set schedule"]
            },
            {
                category: "Manual Outreach Integration",
                question: "What's the current voicemail script effectiveness?",
                options: ["High callback rate", "Moderate success", "Poor results", "No standard script", "Testing different scripts"]
            },
            {
                category: "Manual Outreach Integration",
                question: "What's the callback rate from voicemails?",
                options: ["Below 5%", "5-10%", "10-15%", "15-20%", "Above 20%", "Don't track this"]
            },
            {
                category: "Manual Outreach Integration",
                question: "Are sales reps leaving voicemails at specific trigger points in the customer journey?",
                options: ["Yes, fully mapped", "Some triggers defined", "Ad hoc basis", "No specific triggers", "No voicemails left"]
            },
            {
                category: "Manual Outreach Integration",
                question: "How are manual SMS/text messages currently being used?",
                options: ["Automated sequences", "Manual follow-ups only", "Appointment reminders only", "Mixed automated/manual", "Not using SMS"]
            },
            {
                category: "Manual Outreach Integration",
                question: "What CRM system tracks these manual touches?",
                options: ["Salesforce", "HubSpot", "ActiveCampaign", "Custom-built CRM", "Multiple systems", "No centralized tracking"]
            },
            {
                category: "Manual Outreach Integration",
                question: "Can your CRM trigger automated sequences based on manual activities?",
                options: ["Yes, fully integrated", "Limited integration", "Manual workarounds", "No integration", "Not sure"]
            },

            // Sales Process & Objections
            {
                category: "Sales Process",
                question: "What's their most commonly expressed financial fear?",
                options: ["Dollar collapse", "Market crash", "Inflation", "Government overreach", "Running out of money", "Multiple fears equally"]
            },
            {
                category: "Sales Process",
                question: "Most common objection before purchasing?",
                options: ["Too expensive/fees", "Don't trust the process", "Need spouse approval", "Want to think about it", "Too complicated", "Multiple equally"]
            },
            {
                category: "Sales Process",
                question: "What guarantees are standard in the industry?",
                options: ["Price match", "Buyback guarantee", "No-fee promise", "Satisfaction guarantee", "Multiple guarantees", "No standard guarantees"]
            },
            {
                category: "Sales Process",
                question: "What misconception do prospects most commonly have?",
                options: ["Can take possession before 59½", "No fees involved", "Guaranteed returns", "Too good to be true", "It's a scam", "Various misconceptions"]
            },
            {
                category: "Sales Process",
                question: "Do you offer free consultations? If so, what's the show rate?",
                options: ["Yes, over 70% show", "Yes, 50-70% show", "Yes, under 50% show", "No consultations", "Considering adding"]
            },
            {
                category: "Sales Process",
                question: "What guarantees can you offer that competitors don't?",
                options: ["Better buyback terms", "Lower fees", "Faster service", "Education guarantee", "Working on this"]
            },

            // Customer Understanding - Sales perspective
            {
                category: "Customer Understanding",
                question: "What's the average portfolio size of your customers?",
                options: ["Under $100K", "$100K-$250K", "$250K-$500K", "$500K-$1M", "Over $1M", "Wide distribution"]
            },
            {
                category: "Customer Understanding",
                question: "What percentage of your audience is already retired?",
                options: ["Under 30%", "30-50%", "50-70%", "70-90%", "Over 90%", "Don't know"]
            },
            {
                category: "Customer Understanding",
                question: "What media sources do they cite as most trusted?",
                options: ["Fox News/Talk Radio", "Financial newsletters", "Podcasts", "Social media", "Word of mouth", "Mix of sources"]
            },
            {
                category: "Customer Understanding",
                question: "What specific economic events trigger the highest engagement?",
                options: ["Stock market crashes", "Fed rate changes", "Inflation reports", "Banking crises", "Political elections", "All major events"]
            },
            {
                category: "Customer Understanding",
                question: "What percentage of leads come from referrals?",
                options: ["Under 10%", "10-20%", "20-30%", "30-40%", "Over 40%", "Don't track this"]
            },
            {
                category: "Customer Understanding",
                question: "Average time from first touch to conversion?",
                options: ["Under 7 days", "7-14 days", "14-30 days", "30-60 days", "60-90 days", "Over 90 days"]
            },

            // Educational Content - Sales perspective
            {
                category: "Educational Content",
                question: "What's the #1 question prospects ask before buying?",
                options: ["Is my money safe?", "What are the fees?", "How does the process work?", "Why gold/silver?", "When can I access funds?", "Multiple equally common"]
            },
            {
                category: "Educational Content",
                question: "Do you have documented case studies with specific numbers?",
                options: ["Yes, many", "A few strong ones", "Some without numbers", "Working on them", "No case studies"]
            },
            {
                category: "Educational Content",
                question: "What educational content gets highest engagement?",
                options: ["Market warnings", "How-to guides", "Customer stories", "Economic analysis", "Product comparisons", "Mixed results"]
            },
            {
                category: "Educational Content",
                question: "How do you currently explain SDIRAs to beginners?",
                options: ["Video tutorials", "Written guides", "Phone explanation", "Webinars", "Multiple methods", "Need better approach"]
            },

            // Offer Strategy - Sales focus
            {
                category: "Offer Strategy",
                question: "What's your current lead magnet?",
                options: ["Free gold/silver guide", "Market report", "Consultation", "Multiple magnets", "None currently"]
            },
            {
                category: "Offer Strategy",
                question: "What urgency/scarcity tactics are authentic to your model?",
                options: ["Price volatility", "Limited inventory", "Bonus deadlines", "Market timing", "Don't use urgency"]
            },
            {
                category: "Offer Strategy",
                question: "What exclusive deals do you offer email subscribers?",
                options: ["Fee waivers", "Bonus metals", "Priority service", "Multiple perks", "No exclusives"]
            },

            // Compliance - Sales needs to know
            {
                category: "Compliance & Risk",
                question: "What regulatory requirements must all communications meet?",
                options: ["SEC + FTC + state", "FTC primarily", "Industry standards", "Basic compliance", "Need clarification"]
            },
            {
                category: "Compliance & Risk",
                question: "Are there specific words/phrases that trigger compliance review?",
                options: ["Yes, extensive list", "Several key terms", "Few restrictions", "No restrictions", "Not sure"]
            },
            {
                category: "Compliance & Risk",
                question: "How do you handle state-specific regulations?",
                options: ["Fully automated", "Manual review", "Avoid certain states", "One-size-fits-all", "Need better system"]
            },
            {
                category: "Compliance & Risk",
                question: "What disclaimers are mandatory?",
                options: ["Multiple required", "Standard investment", "Basic only", "Not sure", "Need legal review"]
            },
            {
                category: "Compliance & Risk",
                question: "How do you ensure TCPA compliance for calls and texts?",
                options: ["Full compliance system", "Basic consent", "Manual tracking", "Need improvement", "Not sure of requirements"]
            },

            // Success Metrics - Sales perspective
            {
                category: "Success Metrics",
                question: "Target cost per acquisition from email?",
                options: ["Under $500", "$500-$1000", "$1000-$2000", "$2000-$3000", "Over $3000", "Not defined"]
            },
            {
                category: "Success Metrics",
                question: "What's the lifetime value of a typical customer?",
                options: ["Over $10K", "$5K-$10K", "$3K-$5K", "$1K-$3K", "Under $1K", "Don't know"]
            },
            {
                category: "Success Metrics",
                question: "Goal for email-attributed revenue as % of total?",
                options: ["Over 50%", "30-50%", "20-30%", "10-20%", "Under 10%", "No specific goal"]
            },
            {
                category: "Success Metrics",
                question: "How do you define a 'hot lead'?",
                options: ["Multiple engagements + score", "Specific behaviors", "Sales qualification", "Gut feeling", "No definition"]
            },
            {
                category: "Success Metrics",
                question: "What would make this drip campaign a massive success?",
                options: ["Double conversions", "Reduce CAC by 50%", "Increase LTV", "Beat competitors", "Multiple goals"]
            },

            // Sales Team Operations
            {
                category: "Sales Integration",
                question: "How are leads distributed to sales reps?",
                options: ["Round robin", "Territory-based", "Skill-based", "Cherry picking", "First come first serve"]
            },
            {
                category: "Sales Integration",
                question: "What email engagement info do sales reps see?",
                options: ["Full history", "Key metrics only", "Recent activity", "None", "Need better visibility"]
            },
            {
                category: "Sales Integration",
                question: "Can sales reps trigger specific email sequences based on call outcomes?",
                options: ["Yes, multiple options", "Limited options", "No, but needed", "Not necessary", "Manual workarounds"]
            },
            {
                category: "Sales Integration",
                question: "How do you prevent conflicting messages between automated emails and sales calls?",
                options: ["Fully synchronized", "Pause rules", "Rep training", "It's a problem", "No system"]
            },
            {
                category: "Sales Integration",
                question: "What's the handoff process between marketing automation and human touch?",
                options: ["Seamless handoff", "Defined triggers", "Manual process", "Needs improvement", "No formal process"]
            },

            // Customer Journey - Sales perspective
            {
                category: "Customer Journey",
                question: "Where do prospects typically get stuck or ghost you?",
                options: ["After initial interest", "Price revelation", "Application process", "Before consultation", "Various points"]
            },
            {
                category: "Customer Journey",
                question: "What micro-commitments can you build into the journey?",
                options: ["Already mapped out", "Some identified", "Need to develop", "Not sure what these are", "Not applicable"]
            },
            {
                category: "Customer Journey",
                question: "How do you handle leads who request info but won't schedule calls?",
                options: ["Specific sequence", "Keep nurturing", "Give up quickly", "Pass to sales", "No strategy"]
            },
            {
                category: "Customer Journey",
                question: "What percentage of leads never respond to any outreach?",
                options: ["Under 20%", "20-40%", "40-60%", "60-80%", "Over 80%", "Don't track"]
            },

            // Timing & Frequency - Sales input needed
            {
                category: "Timing & Frequency",
                question: "How do you balance automated emails with manual outreach?",
                options: ["Fully coordinated", "Some coordination", "Separate tracks", "Ad hoc", "No coordination"]
            },
            {
                category: "Timing & Frequency",
                question: "Do phone calls trigger email sequence modifications?",
                options: ["Yes, automatically", "Manual updates", "Sometimes", "No", "Should implement"]
            },
            {
                category: "Timing & Frequency",
                question: "What's your policy on weekend/evening communications?",
                options: ["No restrictions", "Weekends OK", "Business hours only", "Depends on urgency", "Testing different approaches"]
            },
            {
                category: "Timing & Frequency",
                question: "How quickly do you follow up on high-intent behaviors?",
                options: ["Within minutes", "Within 1 hour", "Within 4 hours", "Same day", "Next day", "No urgency system"]
            },

            // Integration Questions - Critical for both
            {
                category: "Integration Questions",
                question: "Should manual touches (call, voicemail, text) count equally to email touches?",
                options: ["Yes, all equal", "Phone worth more", "Email worth more", "Different weights", "Need to test"]
            },
            {
                category: "Integration Questions",
                question: "If sales makes 3 calls with voicemails in week 1, how should this affect email frequency?",
                options: ["Reduce emails significantly", "Slightly reduce", "No change", "Increase emails", "Coordinate timing"]
            },
            {
                category: "Integration Questions",
                question: "Optimal ratio of automated to manual touches?",
                options: ["80/20 automated", "60/40 automated", "50/50", "40/60 automated", "Depends on lead"]
            },
            {
                category: "Integration Questions",
                question: "Should high-value leads ($500K+) receive different touch cadence?",
                options: ["Completely different", "More manual touches", "Same but personalized", "VIP track", "No difference"]
            },
            {
                category: "Integration Questions",
                question: "How do you prevent touch fatigue while maintaining needed persistence?",
                options: ["Smart frequency caps", "Value in every touch", "Vary channels", "Monitor engagement", "Still figuring out"]
            }
        ];

        let currentQuestionIndex = 0;
        let answers = {};
        let quizStarted = false;
        let quizCompleted = false;

        function init() {
            showWelcomeScreen();
        }

        function showWelcomeScreen() {
            const content = document.getElementById('content');
            content.innerHTML = `
                <div class="welcome-screen">
                    <h2>Sales Manager Assessment</h2>
                    <p>This quiz focuses on sales-specific aspects of the drip campaign strategy.</p>
                    <p><strong>${quizData.length} strategic questions</strong> covering sales process, customer understanding, manual outreach, and integration with marketing.</p>
                    <p>You can save your progress at any time and download your responses.</p>
                    <button class="start-button" onclick="startQuiz()">Begin Assessment</button>
                </div>
            `;
            updateProgress();
        }

        function startQuiz() {
            quizStarted = true;
            currentQuestionIndex = 0;
            answers = {};
            showQuestion();
        }

        function showQuestion() {
            const question = quizData[currentQuestionIndex];
            const content = document.getElementById('content');
            
            content.innerHTML = `
                <div class="category-label">${question.category}</div>
                <div class="question-text">Question ${currentQuestionIndex + 1}: ${question.question}</div>
                <div class="selection-counter" id="selectionCounter">0 answers selected</div>
                <div class="options" id="options"></div>
                <div class="custom-input-container" style="display: none;" id="customInputContainer">
                    <label for="customInput">Enter your custom answer:</label>
                    <textarea class="custom-input" id="customInput" rows="3" placeholder="Type your answer here..."></textarea>
                </div>
                <div class="navigation">
                    <button class="nav-button prev-button" onclick="previousQuestion()" ${currentQuestionIndex === 0 ? 'disabled' : ''}>Previous</button>
                    <span class="question-counter">${currentQuestionIndex + 1} of ${quizData.length}</span>
                    <button class="nav-button next-button" id="nextButton" onclick="nextQuestion()">Next</button>
                </div>
            `;

            const optionsContainer = document.getElementById('options');
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => toggleOption(index, option);
                optionsContainer.appendChild(optionDiv);
            });

            // Add separator line
            const separator = document.createElement('hr');
            separator.style.cssText = 'margin: 20px 0; border: none; border-top: 1px solid #e0e0e0;';
            optionsContainer.appendChild(separator);

            // Add "I Don't Know" option
            const dontKnowOption = document.createElement('div');
            dontKnowOption.className = 'option';
            dontKnowOption.textContent = '🤷 I Don\'t Know';
            dontKnowOption.onclick = () => selectSpecialOption('I Don\'t Know');
            optionsContainer.appendChild(dontKnowOption);

            // Add "Skip Question" option
            const skipOption = document.createElement('div');
            skipOption.className = 'option';
            skipOption.textContent = '⏭️ Skip Question';
            skipOption.onclick = () => selectSpecialOption('Skip Question');
            optionsContainer.appendChild(skipOption);

            // Add custom answer option
            const customOption = document.createElement('div');
            customOption.className = 'option custom-option';
            customOption.textContent = '✏️ Enter custom answer';
            customOption.onclick = () => selectCustomOption();
            optionsContainer.appendChild(customOption);

            // Load saved answer if exists
            if (answers[currentQuestionIndex]) {
                const savedAnswer = answers[currentQuestionIndex];
                if (savedAnswer.isCustom) {
                    selectCustomOption();
                    document.getElementById('customInput').value = savedAnswer.answer;
                } else if (savedAnswer.isSpecial) {
                    // Handle special options (Skip/Don't Know)
                    const options = document.querySelectorAll('.option');
                    options.forEach(opt => {
                        if (opt.textContent.includes(savedAnswer.answer)) {
                            opt.classList.add('selected');
                        }
                    });
                } else if (savedAnswer.multipleAnswers) {
                    // Handle multiple answers
                    const options = document.querySelectorAll('.option');
                    savedAnswer.selectedAnswers.forEach(answer => {
                        options.forEach((opt, idx) => {
                            if (opt.textContent === answer) {
                                opt.classList.add('selected');
                            }
                        });
                    });
                }
                updateSelectionCounter();
                checkNextButton();
            }

            updateProgress();
        }

        function selectSpecialOption(optionText) {
            // Clear all selections
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            document.getElementById('customInputContainer').style.display = 'none';
            
            // Select the special option
            const options = document.querySelectorAll('.option');
            options.forEach(opt => {
                if (opt.textContent.includes(optionText)) {
                    opt.classList.add('selected');
                }
            });
            
            // Save as special answer
            answers[currentQuestionIndex] = {
                question: quizData[currentQuestionIndex].question,
                category: quizData[currentQuestionIndex].category,
                answer: optionText,
                isSpecial: true,
                isCustom: false,
                multipleAnswers: false
            };
            
            updateSelectionCounter();
            checkNextButton();
        }

        function toggleOption(index, optionText) {
            // Clear special options and custom input if selected
            const specialOptions = document.querySelectorAll('.option');
            specialOptions.forEach(opt => {
                if (opt.textContent.includes('Skip Question') || opt.textContent.includes('I Don\'t Know')) {
                    opt.classList.remove('selected');
                }
            });
            
            // Hide custom input if it was showing
            document.getElementById('customInputContainer').style.display = 'none';
            document.querySelector('.custom-option').classList.remove('selected');
            
            // Toggle this option
            const option = document.querySelectorAll('.option')[index];
            option.classList.toggle('selected');
            
            // Collect all selected options
            const selectedOptions = [];
            document.querySelectorAll('.option.selected').forEach(opt => {
                if (!opt.textContent.includes('Skip Question') && 
                    !opt.textContent.includes('I Don\'t Know') && 
                    !opt.textContent.includes('Enter custom answer')) {
                    selectedOptions.push(opt.textContent);
                }
            });
            
            // Save answer
            if (selectedOptions.length > 0) {
                answers[currentQuestionIndex] = {
                    question: quizData[currentQuestionIndex].question,
                    category: quizData[currentQuestionIndex].category,
                    answer: selectedOptions.join('; '),
                    selectedAnswers: selectedOptions,
                    multipleAnswers: true,
                    isCustom: false,
                    isSpecial: false
                };
            } else {
                delete answers[currentQuestionIndex];
            }
            
            updateSelectionCounter();
            checkNextButton();
        }

        function selectCustomOption() {
            // Clear all other selections
            document.querySelectorAll('.option:not(.custom-option)').forEach(opt => opt.classList.remove('selected'));
            
            // Select custom option
            document.querySelector('.custom-option').classList.add('selected');
            
            // Show custom input
            document.getElementById('customInputContainer').style.display = 'block';
            document.getElementById('customInput').focus();
            
            // Add input listener
            const customInput = document.getElementById('customInput');
            customInput.removeEventListener('input', handleCustomInput);
            customInput.addEventListener('input', handleCustomInput);
        }

        function handleCustomInput() {
            const customValue = document.getElementById('customInput').value.trim();
            if (customValue) {
                answers[currentQuestionIndex] = {
                    question: quizData[currentQuestionIndex].question,
                    category: quizData[currentQuestionIndex].category,
                    answer: customValue,
                    isCustom: true,
                    isSpecial: false,
                    multipleAnswers: false
                };
            } else {
                delete answers[currentQuestionIndex];
            }
            updateSelectionCounter();
            checkNextButton();
        }

        function updateSelectionCounter() {
            const counter = document.getElementById('selectionCounter');
            if (answers[currentQuestionIndex]) {
                if (answers[currentQuestionIndex].isSpecial) {
                    if (answers[currentQuestionIndex].answer === 'Skip Question') {
                        counter.textContent = 'Question will be skipped';
                    } else {
                        counter.textContent = 'Marked as unknown';
                    }
                } else if (answers[currentQuestionIndex].isCustom) {
                    counter.textContent = 'Custom answer provided';
                } else if (answers[currentQuestionIndex].multipleAnswers) {
                    const count = answers[currentQuestionIndex].selectedAnswers.length;
                    counter.textContent = `${count} answer${count !== 1 ? 's' : ''} selected`;
                }
            } else {
                counter.textContent = '0 answers selected';
            }
        }

        function checkNextButton() {
            // Next button is always enabled now since skipping is allowed
            const nextButton = document.getElementById('nextButton');
            if (currentQuestionIndex === quizData.length - 1) {
                nextButton.textContent = 'Complete';
                nextButton.className = 'nav-button download-button';
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                completeQuiz();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestionIndex + (quizStarted ? 1 : 0)) / quizData.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }

        function completeQuiz() {
            quizCompleted = true;
            const content = document.getElementById('content');
            
            const answeredCount = Object.keys(answers).length;
            const skippedCount = Object.values(answers).filter(a => a.answer === 'Skip Question').length;
            const unknownCount = Object.values(answers).filter(a => a.answer === 'I Don\'t Know').length;
            const customCount = Object.values(answers).filter(a => a.isCustom).length;
            const multipleCount = Object.values(answers).filter(a => a.multipleAnswers).length;
            
            content.innerHTML = `
                <div class="completion-screen">
                    <h2>🎉 Assessment Complete!</h2>
                    <p>Thank you for providing your sales insights!</p>
                    
                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-label">Questions Addressed</div>
                            <div class="stat-value">${answeredCount} / ${quizData.length}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Questions Skipped</div>
                            <div class="stat-value">${skippedCount}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Marked Unknown</div>
                            <div class="stat-value">${unknownCount}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Custom Answers</div>
                            <div class="stat-value">${customCount}</div>
                        </div>
                    </div>
                    
                    <p>Download your responses to share with the team.</p>
                    
                    <button class="start-button" onclick="downloadAnswers()">📥 Download All Responses</button>
                    <button class="nav-button prev-button" onclick="reviewAnswers()" style="margin-top: 10px;">Review Answers</button>
                </div>
            `;
            updateProgress();
        }

        function reviewAnswers() {
            currentQuestionIndex = 0;
            showQuestion();
        }

        function downloadAnswers() {
            let textContent = "SALES MANAGER - DRIP CAMPAIGN QUIZ RESPONSES\n";
            textContent += "=============================================\n\n";
            textContent += `Date: ${new Date().toLocaleDateString()}\n`;
            textContent += `Questions Answered: ${Object.keys(answers).length} of ${quizData.length}\n\n`;
            
            let currentCategory = "";
            
            quizData.forEach((question, index) => {
                if (question.category !== currentCategory) {
                    currentCategory = question.category;
                    textContent += `\n--- ${currentCategory.toUpperCase()} ---\n\n`;
                }
                
                textContent += `Q${index + 1}: ${question.question}\n`;
                
                if (answers[index]) {
                    if (answers[index].answer === 'Skip Question') {
                        textContent += `Answer: [SKIPPED]\n`;
                    } else if (answers[index].answer === 'I Don\'t Know') {
                        textContent += `Answer: [I DON'T KNOW]\n`;
                    } else if (answers[index].multipleAnswers) {
                        textContent += `Answer: [MULTIPLE SELECTIONS]\n`;
                        answers[index].selectedAnswers.forEach((ans, i) => {
                            textContent += `  ${i + 1}. ${ans}\n`;
                        });
                    } else if (answers[index].isCustom) {
                        textContent += `Answer: ${answers[index].answer} [CUSTOM RESPONSE]\n`;
                    } else {
                        textContent += `Answer: ${answers[index].answer}\n`;
                    }
                    textContent += "\n";
                } else {
                    textContent += "Answer: [NOT ANSWERED]\n\n";
                }
            });
            
            // Create download
            const blob = new Blob([textContent], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `sales_manager_quiz_${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        // Add download button to header for saving progress anytime
        window.addEventListener('DOMContentLoaded', () => {
            const header = document.querySelector('.header');
            const saveButton = document.createElement('button');
            saveButton.textContent = '💾 Save Progress';
            saveButton.style.cssText = `
                position: absolute;
                right: 30px;
                top: 30px;
                padding: 8px 16px;
                background: rgba(255,255,255,0.2);
                color: white;
                border: 1px solid rgba(255,255,255,0.3);
                border-radius: 6px;
                cursor: pointer;
                font-size: 14px;
                transition: all 0.2s ease;
            `;
            saveButton.onmouseover = () => saveButton.style.background = 'rgba(255,255,255,0.3)';
            saveButton.onmouseout = () => saveButton.style.background = 'rgba(255,255,255,0.2)';
            saveButton.onclick = () => {
                if (Object.keys(answers).length > 0) {
                    downloadAnswers();
                } else {
                    alert('Please answer at least one question before saving.');
                }
            };
            header.appendChild(saveButton);
        });

        // Initialize quiz
        init();
    </script>
</body>
</html>
